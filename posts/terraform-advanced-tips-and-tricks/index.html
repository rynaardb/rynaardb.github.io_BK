<!doctype html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Terraform Advanced Tips and Tricks" /><meta property="og:locale" content="en" /><meta name="description" content="Terraform is a powerful tool for managing Infrastructure as Code (IaC), allowing you to provision and manage resources efficiently. While the basics of Terraform are relatively straightforward, there are several advanced tips and tricks that can enhance your Terraform workflow and help you optimize your infrastructure automation. In this blog post, we will explore some advanced techniques and best practices to take your Terraform skills to the next level." /><meta property="og:description" content="Terraform is a powerful tool for managing Infrastructure as Code (IaC), allowing you to provision and manage resources efficiently. While the basics of Terraform are relatively straightforward, there are several advanced tips and tricks that can enhance your Terraform workflow and help you optimize your infrastructure automation. In this blog post, we will explore some advanced techniques and best practices to take your Terraform skills to the next level." /><link rel="canonical" href="https://rynaardb.com/posts/terraform-advanced-tips-and-tricks/" /><meta property="og:url" content="https://rynaardb.com/posts/terraform-advanced-tips-and-tricks/" /><meta property="og:site_name" content="Rynaard Burger" /><meta property="og:image" content="https://rynaardb.com/assets/images/terraform-advanced-tips-and-tricks.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-05-24T00:00:00+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://rynaardb.com/assets/images/terraform-advanced-tips-and-tricks.png" /><meta property="twitter:title" content="Terraform Advanced Tips and Tricks" /><meta name="twitter:site" content="@rynaardb" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-07-01T23:41:38+02:00","datePublished":"2023-05-24T00:00:00+02:00","description":"Terraform is a powerful tool for managing Infrastructure as Code (IaC), allowing you to provision and manage resources efficiently. While the basics of Terraform are relatively straightforward, there are several advanced tips and tricks that can enhance your Terraform workflow and help you optimize your infrastructure automation. In this blog post, we will explore some advanced techniques and best practices to take your Terraform skills to the next level.","headline":"Terraform Advanced Tips and Tricks","image":"https://rynaardb.com/assets/images/terraform-advanced-tips-and-tricks.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://rynaardb.com/posts/terraform-advanced-tips-and-tricks/"},"url":"https://rynaardb.com/posts/terraform-advanced-tips-and-tricks/"}</script><title>Terraform Advanced Tips and Tricks | Rynaard Burger</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Rynaard Burger"><meta name="application-name" content="Rynaard Burger"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="https://avatars.githubusercontent.com/u/185616?v=4" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">Rynaard Burger</a></div><div class="site-subtitle fst-italic">Software Engineer | Cape Town, South Africa ‚òÄÔ∏è üáøüá¶ | DevOps | GitOps | Cloud Computing | Automation | Distributed Systems | Architecture | Mobile Development</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/all-posts/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ALL POSTS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://twitter.com/rynaardb" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="https://github.com/rynaardb" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/rynaardburger/" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Terraform Advanced Tips and Tricks</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </span> <span id="search-cancel">Cancel</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>Terraform Advanced Tips and Tricks</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1684879200" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > May 24, 2023 </em> </span> <span> Updated <em class="" data-ts="1688247698" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 1, 2023 </em> </span><div class="mt-3 mb-3"> <a href="/assets/images/terraform-advanced-tips-and-tricks.png" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/images/terraform-advanced-tips-and-tricks.png" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/rynaardb">Rynaard Burger</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="845 words" > <em>4 min</em> read</span></div></div></div><div class="post-content"><p><a href="https://www.terraform.io">Terraform</a> is a powerful tool for managing Infrastructure as Code (IaC), allowing you to provision and manage resources efficiently. While the basics of Terraform are relatively straightforward, there are several advanced tips and tricks that can enhance your Terraform workflow and help you optimize your infrastructure automation. In this blog post, we will explore some advanced techniques and best practices to take your Terraform skills to the next level.</p><h3 id="workspaces-for-environment-separation"><span class="me-2">Workspaces for Environment Separation</span><a href="#workspaces-for-environment-separation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Terraform workspaces allow you to manage multiple environments (such as development, staging, and production) within a single Terraform configuration. By creating separate workspaces, you can maintain different state files and easily manage infrastructure changes across environments. Use the <code class="language-plaintext highlighter-rouge">terraform workspace</code> command to switch between workspaces and keep your configurations organized.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c"># Create a new workspace for the development environment</span>
terraform workspace new development

<span class="c"># Switch to the staging workspace</span>
terraform workspace <span class="k">select </span>staging

<span class="c"># List available workspaces</span>
terraform workspace list
</pre></table></code></div></div><h3 id="remote-state-storage"><span class="me-2">Remote State Storage</span><a href="#remote-state-storage" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Storing Terraform state files remotely provides better collaboration, version control, and security. Use remote state storage options such as Terraform Cloud, Amazon S3, or Azure Blob Storage to centrally store and manage your state files. This ensures consistency and avoids potential conflicts when working in a team or across different machines.</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nx">terraform</span> <span class="p">{</span>
  <span class="nx">backend</span> <span class="s2">"s3"</span> <span class="p">{</span>
    <span class="nx">bucket</span> <span class="p">=</span> <span class="s2">"your-s3-bucket"</span>
    <span class="nx">key</span>    <span class="p">=</span> <span class="s2">"terraform.tfstate"</span>
    <span class="nx">region</span> <span class="p">=</span> <span class="s2">"us-west-2"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="leverage-terraform-modules"><span class="me-2">Leverage Terraform Modules</span><a href="#leverage-terraform-modules" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Terraform modules enable code reuse and help standardize infrastructure patterns. Create reusable modules for common infrastructure components or application stacks. By abstracting away the complexity and providing configurable inputs and outputs, modules promote consistency, reduce duplication, and simplify maintenance.</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nx">module</span> <span class="s2">"vpc"</span> <span class="p">{</span>
  <span class="nx">source</span>  <span class="p">=</span> <span class="s2">"terraform-aws-modules/vpc/aws"</span>
  <span class="nx">version</span> <span class="p">=</span> <span class="s2">"3.0.0"</span>
  
  <span class="c1"># Module inputs</span>
  <span class="nx">name</span> <span class="p">=</span> <span class="s2">"my-vpc"</span>
  <span class="nx">cidr</span> <span class="p">=</span> <span class="s2">"10.0.0.0/16"</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="use-dynamic-block-for-repeated-resource-configurations"><span class="me-2">Use Dynamic Block for Repeated Resource Configurations</span><a href="#use-dynamic-block-for-repeated-resource-configurations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The dynamic block feature introduced in Terraform 0.12 allows you to generate repeated resource configurations dynamically. This is useful when defining multiple similar resources with different configurations. Instead of writing repetitive code, leverage the dynamic block to generate the desired resource configurations based on variables or data sources.</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="nx">resource</span> <span class="s2">"aws_instance"</span> <span class="s2">"servers"</span> <span class="p">{</span>
  <span class="nx">count</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">instance_count</span>

  <span class="nx">dynamic</span> <span class="s2">"block_device"</span> <span class="p">{</span>
    <span class="nx">for_each</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">block_devices</span>

    <span class="nx">content</span> <span class="p">{</span>
      <span class="nx">device_name</span> <span class="p">=</span> <span class="nx">block_device</span><span class="err">.</span><span class="nx">value</span><span class="err">.</span><span class="nx">device_name</span>
      <span class="nx">volume_size</span> <span class="p">=</span> <span class="nx">block_device</span><span class="err">.</span><span class="nx">value</span><span class="err">.</span><span class="nx">volume_size</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="data-sources-for-cross-resource-communication"><span class="me-2">Data Sources for Cross-Resource Communication</span><a href="#data-sources-for-cross-resource-communication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Data sources in Terraform allow you to fetch information from external systems or existing resources and use that data during resource creation or configuration. Use data sources to retrieve data such as IP addresses, security group IDs, or DNS records from other resources or APIs. This facilitates better coordination and communication between resources.</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="nx">data</span> <span class="s2">"aws_security_group"</span> <span class="s2">"existing"</span> <span class="p">{</span>
  <span class="nx">id</span> <span class="p">=</span> <span class="s2">"sg-0123456789abcdef0"</span>
<span class="p">}</span>

<span class="nx">resource</span> <span class="s2">"aws_instance"</span> <span class="s2">"example"</span> <span class="p">{</span>
  <span class="c1"># ...</span>

  <span class="nx">vpc_security_group_ids</span> <span class="p">=</span> <span class="p">[</span>
    <span class="nx">aws_security_group</span><span class="err">.</span><span class="nx">existing</span><span class="err">.</span><span class="nx">id</span><span class="p">,</span>
  <span class="p">]</span>

  <span class="c1"># ...</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="conditional-resource-creation-with-count-and-conditional-expressions"><span class="me-2">Conditional Resource Creation with Count and Conditional Expressions</span><a href="#conditional-resource-creation-with-count-and-conditional-expressions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Terraform‚Äôs <code class="language-plaintext highlighter-rouge">count</code> feature and conditional expressions enable you to conditionally create or manage resources based on certain conditions or variables. This is useful when you want to dynamically control resource creation based on user inputs or environment-specific requirements. Use <code class="language-plaintext highlighter-rouge">count</code> and conditionals to create or destroy resources selectively.</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nx">resource</span> <span class="s2">"aws_instance"</span> <span class="s2">"example"</span> <span class="p">{</span>
  <span class="nx">count</span> <span class="p">=</span> <span class="nx">var</span><span class="err">.</span><span class="nx">create_instance</span> <span class="err">?</span> <span class="mi">1</span> <span class="err">:</span> <span class="mi">0</span>

  <span class="c1"># ...</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="use-terraform-providers-and-provider-configurations"><span class="me-2">Use Terraform Providers and Provider Configurations</span><a href="#use-terraform-providers-and-provider-configurations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Take advantage of Terraform providers and provider configurations to interact with various cloud services, APIs, or third-party tools. Providers extend Terraform‚Äôs capabilities and enable seamless integration with different platforms. Customize provider configurations to fine-tune the behavior of the provider, such as adjusting API timeouts or</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nx">provider</span> <span class="s2">"aws"</span> <span class="p">{</span>
  <span class="nx">region</span> <span class="p">=</span> <span class="s2">"us-west-2"</span>
  <span class="nx">profile</span> <span class="p">=</span> <span class="s2">"my-aws-profile"</span>
  <span class="nx">shared_credentials_file</span> <span class="p">=</span> <span class="s2">"/path/to/aws/credentials"</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="harness-the-power-of-terraform-plugins"><span class="me-2">Harness the Power of Terraform Plugins</span><a href="#harness-the-power-of-terraform-plugins" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Terraform offers a rich ecosystem of community-built plugins that can extend its functionality and integrate with other tools or services. Explore the available plugins for Terraform and leverage them to simplify complex workflows, integrate with CI/CD pipelines, or automate additional tasks such as secrets management or infrastructure validation.</p><div class="language-hcl highlighter-rouge"><div class="code-header"> <span data-label-text="Hcl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="nx">provider</span> <span class="s2">"terraform"</span> <span class="p">{</span>
  <span class="nx">required_version</span> <span class="p">=</span> <span class="s2">"&gt;= 1.0.0"</span>
  <span class="nx">plugins</span> <span class="p">{</span>
    <span class="nx">mycustomplugin</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">source</span>  <span class="p">=</span> <span class="s2">"mycompany/mycustomplugin"</span>
      <span class="nx">version</span> <span class="p">=</span> <span class="s2">"1.0.0"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Use the custom plugin in your configuration</span>
<span class="nx">resource</span> <span class="s2">"mycustomplugin_resource"</span> <span class="s2">"example"</span> <span class="p">{</span>
  <span class="c1"># ...</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="use-terraform-testing-frameworks"><span class="me-2">Use Terraform Testing Frameworks</span><a href="#use-terraform-testing-frameworks" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Automated testing is crucial for validating your Terraform configurations and ensuring that your infrastructure is deployed correctly. Explore testing frameworks like <a href="https://github.com/gruntwork-io/terratest">Terratest</a> or <a href="https://github.com/newcontext-oss/kitchen-terraform">Kitchen-Terraform</a> to write and execute tests against your Terraform code. This helps catch potential issues or misconfigurations early in the development cycle.</p><div file="main_test.go" class="language-go highlighter-rouge"><div class="code-header"> <span data-label-text="main_test.go"><i class="far fa-file-code fa-fw"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre>
<span class="k">package</span> <span class="n">test</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"testing"</span>

  <span class="s">"github.com/gruntwork-io/terratest/modules/terraform"</span>
  <span class="s">"github.com/stretchr/testify/assert"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">TestTerraformInfrastructure</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span><span class="n">testing</span><span class="o">.</span><span class="n">T</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">terraformOptions</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">terraform</span><span class="o">.</span><span class="n">Options</span><span class="p">{</span>
    <span class="n">TerraformDir</span><span class="o">:</span> <span class="s">"./infra"</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="k">defer</span> <span class="n">terraform</span><span class="o">.</span><span class="n">Destroy</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">terraformOptions</span><span class="p">)</span>

  <span class="n">terraform</span><span class="o">.</span><span class="n">InitAndApply</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">terraformOptions</span><span class="p">)</span>

  <span class="c">// Assertions to validate the infrastructure</span>
  <span class="n">assert</span><span class="o">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s">"expected-value"</span><span class="p">,</span> <span class="n">terraform</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">terraformOptions</span><span class="p">,</span> <span class="s">"output_variable"</span><span class="p">))</span>
<span class="p">}</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/devops/'>devops</a>, <a href='/categories/terraform/'>terraform</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/terrafrom/" class="post-tag no-text-decoration" >terrafrom</a> <a href="/tags/iac/" class="post-tag no-text-decoration" >iac</a> <a href="/tags/infrastructure-as-code/" class="post-tag no-text-decoration" >infrastructure-as-code</a> <a href="/tags/automation/" class="post-tag no-text-decoration" >automation</a> <a href="/tags/tips/" class="post-tag no-text-decoration" >tips</a> <a href="/tags/tricks/" class="post-tag no-text-decoration" >tricks</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Terraform%20Advanced%20Tips%20and%20Tricks%20-%20Rynaard%20Burger&url=https%3A%2F%2Frynaardb.com%2Fposts%2Fterraform-advanced-tips-and-tricks%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Terraform%20Advanced%20Tips%20and%20Tricks%20-%20Rynaard%20Burger&u=https%3A%2F%2Frynaardb.com%2Fposts%2Fterraform-advanced-tips-and-tricks%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Frynaardb.com%2Fposts%2Fterraform-advanced-tips-and-tricks%2F&text=Terraform%20Advanced%20Tips%20and%20Tricks%20-%20Rynaard%20Burger" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Frynaardb.com%2Fposts%2Fterraform-advanced-tips-and-tricks%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/ephemeral-builds-empowering-efficient-and-disposable-build-environments/">Ephemeral Builds - Empowering Efficient and Disposable Build Environments</a><li class="text-truncate lh-lg"> <a href="/posts/docker-multi-stage-builds/">Docker Multi-stage Builds</a><li class="text-truncate lh-lg"> <a href="/posts/progressive-delivery-techniques-in-devops/">Progressive Delivery Techniques in DevOps</a><li class="text-truncate lh-lg"> <a href="/posts/detect-and-prevent-deployment-drift-in-kubernetes/">Detect and Prevent Deployment Drift in Kubernetes</a><li class="text-truncate lh-lg"> <a href="/posts/testing-docker-images-tools-and-best-practices/">Testing Docker Images - Tools and Best Practices</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/iac/">iac</a> <a class="post-tag btn btn-outline-primary" href="/tags/infrastructure-as-code/">infrastructure-as-code</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/devops/">devops</a> <a class="post-tag btn btn-outline-primary" href="/tags/terraform/">terraform</a> <a class="post-tag btn btn-outline-primary" href="/tags/xcode/">xcode</a> <a class="post-tag btn btn-outline-primary" href="/tags/ci-cd/">ci-cd</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai/">ai</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Further Reading</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/ephemeral-builds-empowering-efficient-and-disposable-build-environments/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1684015200" data-df="ll" > May 14, 2023 </em><h4 class="pt-0 my-2" data-toc-skip>Ephemeral Builds - Empowering Efficient and Disposable Build Environments</h4><div class="text-muted small"><p> In the world of software development, build environments play a crucial role in producing reliable and high-quality software. Traditionally, build environments have been long-lived and shared acros...</p></div></div></a></div><div class="col"> <a href="/posts/terragrunt-simplify-and-scale-your-infrastructure-with-ease/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1685916000" data-df="ll" > Jun 5, 2023 </em><h4 class="pt-0 my-2" data-toc-skip>Terragrunt - Simplify and Scale Your Infrastructure with Ease</h4><div class="text-muted small"><p> In the world of infrastructure as code (IaC), managing complex infrastructure efficiently and consistently can be a daunting task. However, with the advent of tools like Terragrunt, this process ha...</p></div></div></a></div><div class="col"> <a href="/posts/essential-xcode-keyboard-shortcuts-for-increased-productivity/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1594159200" data-df="ll" > Jul 8, 2020 </em><h4 class="pt-0 my-2" data-toc-skip>Essential Xcode keyboard shortcuts for increased productivity</h4><div class="text-muted small"><p> As iOS developers, we spend a considerable amount of time in Xcode, so it‚Äôs worth taking some time to know your way around Xcode. Knowing how to edit, search effectively, and how to navigate your ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/securing-devops-pipelines/" class="btn btn-outline-primary" prompt="Older" ><p>Securing DevOps Pipelines - Best Practices for Robust Application Security</p></a> <a href="/posts/terragrunt-simplify-and-scale-your-infrastructure-with-ease/" class="btn btn-outline-primary" prompt="Newer" ><p>Terragrunt - Simplify and Scale Your Infrastructure with Ease</p></a></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/iac/">iac</a> <a class="post-tag btn btn-outline-primary" href="/tags/infrastructure-as-code/">infrastructure-as-code</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/devops/">devops</a> <a class="post-tag btn btn-outline-primary" href="/tags/terraform/">terraform</a> <a class="post-tag btn btn-outline-primary" href="/tags/xcode/">xcode</a> <a class="post-tag btn btn-outline-primary" href="/tags/ci-cd/">ci-cd</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai/">ai</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>rynaardb.com</p><p>¬© 2023 <a href="https://twitter.com/rynaardb">Rynaard Burger</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/en.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-N0LQM86HKV"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-N0LQM86HKV'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3797894884439015" crossorigin="anonymous"></script> <a rel="me" href="https://github.com/rynaardb">GitHub</a> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
