<!doctype html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Swift Packages - New in Swift 5.3" /><meta property="og:locale" content="en" /><meta name="description" content="Following up on one of my previous article, it is time to revisit Swift Packages and discover what is new in Swift 5.3 and Xcode 12 and how we can take advantage of all the new features." /><meta property="og:description" content="Following up on one of my previous article, it is time to revisit Swift Packages and discover what is new in Swift 5.3 and Xcode 12 and how we can take advantage of all the new features." /><link rel="canonical" href="https://rynaardb.com/posts/swift-packages-new-in-swift-5-3/" /><meta property="og:url" content="https://rynaardb.com/posts/swift-packages-new-in-swift-5-3/" /><meta property="og:site_name" content="Rynaard Burger" /><meta property="og:image" content="https://rynaardb.com/assets/images/swift-packages.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-11-19T00:00:00+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://rynaardb.com/assets/images/swift-packages.png" /><meta property="twitter:title" content="Swift Packages - New in Swift 5.3" /><meta name="twitter:site" content="@rynaardb" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-07-01T23:41:38+02:00","datePublished":"2020-11-19T00:00:00+02:00","description":"Following up on one of my previous article, it is time to revisit Swift Packages and discover what is new in Swift 5.3 and Xcode 12 and how we can take advantage of all the new features.","headline":"Swift Packages - New in Swift 5.3","image":"https://rynaardb.com/assets/images/swift-packages.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://rynaardb.com/posts/swift-packages-new-in-swift-5-3/"},"url":"https://rynaardb.com/posts/swift-packages-new-in-swift-5-3/"}</script><title>Swift Packages - New in Swift 5.3 | Rynaard Burger</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Rynaard Burger"><meta name="application-name" content="Rynaard Burger"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="https://avatars.githubusercontent.com/u/185616?v=4" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">Rynaard Burger</a></div><div class="site-subtitle fst-italic">Software Engineer | Cape Town, South Africa ‚òÄÔ∏è üáøüá¶ | DevOps | GitOps | Cloud Computing | Automation | Distributed Systems | Architecture | Mobile Development</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/all-posts/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ALL POSTS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://twitter.com/rynaardb" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="https://github.com/rynaardb" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/rynaardburger/" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Swift Packages - New in Swift 5.3</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </span> <span id="search-cancel">Cancel</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>Swift Packages - New in Swift 5.3</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1605736800" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Nov 19, 2020 </em> </span> <span> Updated <em class="" data-ts="1688247698" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 1, 2023 </em> </span><div class="mt-3 mb-3"> <a href="/assets/images/swift-packages.png" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/images/swift-packages.png" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/rynaardb">Rynaard Burger</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1375 words" > <em>7 min</em> read</span></div></div></div><div class="post-content"><p>Following up on one of my <a href="https://rynaardb.com/posts/2020/01/08/swift-package-manager-creating-packages.html">previous article</a>, it is time to revisit Swift Packages and discover what is new in Swift 5.3 and Xcode 12 and how we can take advantage of all the new features.</p><h2 id="swiftui-previews"><span class="me-2">SwiftUI Previews</span><a href="#swiftui-previews" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>With SwiftUI becoming increasingly more popular it only makes sense that we now have proper SwiftUI preview support for packages starting from Xcode 12.</p><p>Before Xcode 12, rendering SwiftUI previews for packages required a couple of workarounds which involves creating an Xcode workspace and adding a client application, etc. Luckily, none of these workarounds are needed anymore.</p><h3 id="updating-from-earlier-versions"><span class="me-2">Updating from earlier versions</span><a href="#updating-from-earlier-versions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>A few essential things to keep in mind when updating your existing Swift Packages created with earlier versions of Swift or Xcode.</p><p>Ensure that you update your package manifest to use the latest required tools version:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">swift</span><span class="o">-</span><span class="n">tools</span><span class="o">-</span><span class="nv">version</span><span class="p">:</span><span class="mf">5.3</span>
</pre></table></code></div></div><p>Remember to specifiy the platforms and their versions your package supports:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">platforms</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nf">iOS</span><span class="p">(</span><span class="o">.</span><span class="n">v13</span><span class="p">),</span> <span class="o">.</span><span class="nf">macOS</span><span class="p">(</span><span class="o">.</span><span class="n">v10_15</span><span class="p">),</span> <span class="o">.</span><span class="nf">watchOS</span><span class="p">(</span><span class="o">.</span><span class="n">v6</span><span class="p">),</span> <span class="o">.</span><span class="nf">tvOS</span><span class="p">(</span><span class="o">.</span><span class="n">v13</span><span class="p">)]</span>
</pre></table></code></div></div><blockquote><p>When adding a SwiftUI view to your package in Xcode 12 you may encounter the following error when trying to render the preview: <code class="language-plaintext highlighter-rouge">SchemeBuildError: Failed to build the scheme ""</code>. To resolve the error, simply remove <code class="language-plaintext highlighter-rouge">.testTarget</code> entry in your package manifest file (Package.swift). This appears to be a bug in Xcode 12.</p></blockquote><h2 id="package-resouces"><span class="me-2">Package Resouces</span><a href="#package-resouces" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Also new in Swift 5.3 and Xcode 12, is the ability to add resources such as images, storyboards, asset catalogs, localized resources, and much more.</p><p>This was one of the key features that was missing in earlier versions of Swift and I‚Äôm really glad to see it finally being implemented.</p><h3 id="adding-resources-to-a-package"><span class="me-2">Adding resources to a package</span><a href="#adding-resources-to-a-package" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Adding resources to a package is pretty straightforward - simply create a new file or add an existing file in your package folder under your package‚Äôs Sources folder:</p><p><a href="/assets/images/swift-packages-adding-resources-in-xcode.png" class="popup img-link "><img data-src="/assets/images/swift-packages-adding-resources-in-xcode.png" alt="image" class="lazyload" data-proofer-ignore></a></p><h3 id="resource-file-types"><span class="me-2">Resource file types</span><a href="#resource-file-types" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Files in a package are processed according to their type, as indicated by the filename suffix.</p><p>Clear purpose resource files like .xcassets, .storyboard, .xib, .nib, .xcdatamodel, xcmappingmodel, etc. has clear purpose and Xcode knows what to do with them. These clear purpose resource files can simply be added without any additional action required.</p><p>Other types of resource files can have a variety of purposes and for those, we need to declare their intent in the package manifest.</p><h3 id="declaring-the-resources-intent"><span class="me-2">Declaring the resource‚Äôs intent</span><a href="#declaring-the-resources-intent" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Let‚Äôs have a look at the following package manifest:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="c1">// swift-tools-version:5.3</span>

<span class="kd">import</span> <span class="kt">PackageDescription</span>

<span class="k">let</span> <span class="nv">package</span> <span class="o">=</span> <span class="kt">Package</span><span class="p">(</span>
    <span class="nv">name</span><span class="p">:</span> <span class="s">"SwiftPackageExample"</span><span class="p">,</span>
    <span class="n">defaultLocalization</span><span class="p">:</span> <span class="s">"en"</span><span class="p">,</span>
    <span class="nv">platforms</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">iOS</span><span class="p">(</span><span class="o">.</span><span class="n">v13</span><span class="p">),</span> <span class="o">.</span><span class="nf">macOS</span><span class="p">(</span><span class="o">.</span><span class="n">v10_15</span><span class="p">),</span> <span class="o">.</span><span class="nf">watchOS</span><span class="p">(</span><span class="o">.</span><span class="n">v6</span><span class="p">),</span> <span class="o">.</span><span class="nf">tvOS</span><span class="p">(</span><span class="o">.</span><span class="n">v13</span><span class="p">)</span>
    <span class="p">],</span>
    <span class="nv">products</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">library</span><span class="p">(</span>
            <span class="nv">name</span><span class="p">:</span> <span class="s">"SwiftPackageExample"</span><span class="p">,</span>
            <span class="nv">targets</span><span class="p">:</span> <span class="p">[</span><span class="s">"SwiftPackageExample"</span><span class="p">]),</span>
    <span class="p">],</span>
    <span class="nv">targets</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">target</span><span class="p">(</span>
            <span class="nv">name</span><span class="p">:</span> <span class="s">"SwiftPackageExample"</span><span class="p">,</span>
            <span class="nv">excludes</span><span class="p">:</span> <span class="p">[</span><span class="s">"Release Notes.txt"</span><span class="p">],</span>
            <span class="nv">resources</span><span class="p">:</span> <span class="p">[</span>
                    <span class="o">.</span><span class="nf">process</span><span class="p">(</span><span class="s">"Image.png"</span><span class="p">),</span>
                    <span class="o">.</span><span class="nf">process</span><span class="p">(</span><span class="s">"StaticData.json"</span><span class="p">),</span> 
                    <span class="o">.</span><span class="nf">copy</span><span class="p">(</span><span class="s">"Zip Codes"</span><span class="p">)]</span>
        <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></table></code></div></div><h4 id="adding-files"><span class="me-2">Adding files</span><a href="#adding-files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Because <code class="language-plaintext highlighter-rouge">Image.png</code> does not have a clear purpose, we need to declare the file‚Äôs intent in the package manifest. We do so by adding a <code class="language-plaintext highlighter-rouge">.process</code> action:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">resources</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nf">process</span><span class="p">(</span><span class="s">"Image.png"</span><span class="p">)]</span>
</pre></table></code></div></div><blockquote><p>Most resources should use the <code class="language-plaintext highlighter-rouge">.process</code> action for it to be transformed as appropriate at build time. The type of processing that will take place greatly depends on the platform for which the package is built.</p></blockquote><h4 id="adding-folders"><span class="me-2">Adding folders</span><a href="#adding-folders" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>You can also add folders using the <code class="language-plaintext highlighter-rouge">.copy</code> action:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">resources</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="nf">copy</span><span class="p">(</span><span class="s">"Zip Codes"</span><span class="p">)]</span>
</pre></table></code></div></div><blockquote><p>Using the <code class="language-plaintext highlighter-rouge">.copy</code> action will copy the entire folder while also preserving the folder structure.</p></blockquote><h4 id="excluding-files-and-folders"><span class="me-2">Excluding files and folders</span><a href="#excluding-files-and-folders" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Some files or folders might only be needed during development and can be excluded:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">excludes</span><span class="p">:</span> <span class="p">[</span><span class="s">"Release Notes.txt"</span><span class="p">]</span>
</pre></table></code></div></div><blockquote><p>The same syntax above also applies for excluding folders.</p></blockquote><h3 id="a-couple-of-notes-regarding-resource-processing"><span class="me-2">A couple of notes regarding resource processing</span><a href="#a-couple-of-notes-regarding-resource-processing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Processing:</p><ul><li>The <code class="language-plaintext highlighter-rouge">.process</code> action uses the built-in rules as appropriate for the platform<li>Recommend choice except in special circumstances<li>Falls back to <code class="language-plaintext highlighter-rouge">.copy</code> if the file type is unknown or when no special processing is needed<li>For folders, the processing rules are applied recursively to all files under the directory</ul><p>Copying:</p><ul><li><code class="language-plaintext highlighter-rouge">.copy</code> makes a verbatim copy regardless of the file type<li>No transformation takes place, good for source files, etc.<li>Copies the whole directory as-is, preserving the folder structure</ul><h3 id="how-are-resources-linked-and-bundled-together-with-your-app"><span class="me-2">How are resources linked and bundled together with your app?</span><a href="#how-are-resources-linked-and-bundled-together-with-your-app" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Source files of a package get compiled into a code module and then linked into the app. Resources of a package get processed into a resource bundle and then gets embedded in the app.</p><p>The resource bundle becomes part of the main app bundle and therefore will be available at runtime.</p><p>For unbundled applications like command-line applications, resource bundles need to be installed alongside the application/tool.</p><h3 id="accessing-package-resources-from-code"><span class="me-2">Accessing package resources from code</span><a href="#accessing-package-resources-from-code" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Accessing package resources from code is equally straightforward and is mainly done using Foundation‚Äôs Bundle API. Accessing resources is the same on all platforms that support Swift Packages and is independent of built artifacts.</p><p><strong>Accessing a file using the module bundle directly:</strong></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c1">// Swift</span>
<span class="k">let</span> <span class="nv">path</span> <span class="o">=</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="nf">path</span><span class="p">(</span><span class="nv">forResource</span><span class="p">:</span> <span class="s">"StaticData"</span><span class="p">,</span> <span class="nv">ofType</span><span class="p">:</span> <span class="s">"json"</span><span class="p">)</span>
</pre></table></code></div></div><div class="language-objectivec highlighter-rouge"><div class="code-header"> <span data-label-text="Objective-C"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c1">// Objective-C</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">path</span> <span class="o">=</span> <span class="p">[</span><span class="n">SWIFTPM_MODULE_BUNDLE</span> <span class="nf">pathForResource</span><span class="p">:</span><span class="s">@"StaticData"</span> <span class="nf">ofType</span><span class="p">:</span> <span class="s">@"json"</span><span class="p">];</span>
</pre></table></code></div></div><p><strong>Passing the module bundle to APIs:</strong></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c1">// Swift</span>
<span class="k">let</span> <span class="nv">image</span> <span class="o">=</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"Image"</span><span class="p">,</span> <span class="nv">in</span><span class="p">:</span> <span class="o">.</span><span class="n">module</span><span class="p">)</span>
</pre></table></code></div></div><div class="language-objectivec highlighter-rouge"><div class="code-header"> <span data-label-text="Objective-C"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c1">// Objective-C</span>
<span class="n">UIImage</span> <span class="o">*</span><span class="n">image</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIImage</span> <span class="nf">imageNamed</span><span class="p">:</span><span class="s">@"Image"</span> <span class="nf">inBundle</span><span class="p">:</span> <span class="n">SWIFTPM_MODULE_BUNDLE</span><span class="p">];</span>
</pre></table></code></div></div><p><strong>Best practices when accessing resources:</strong></p><ul><li>Add each resource to the module that uses it<li>If you need your resource to be visible from other modules, provide typed public accessors for individual resources<li>Don‚Äôt vend the whole resource bundle as an API to avoid external dependencies</ul><h2 id="localized-resources"><span class="me-2">Localized Resources</span><a href="#localized-resources" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Another great addition to Swift Packages is the ability to add localized resources to your package.</p><p>The very first thing to do is to set the default localization language in the package manifest:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">defaultLocalization</span><span class="p">:</span> <span class="s">"en"</span>
</pre></table></code></div></div><blockquote><p>Setting the default localization language will also be used as a fallback in case no better match can be found at runtime.</p></blockquote><p>Next, we need to create a localization directory for our default localization:</p><ol><li>Create a localization folder i.e. <code class="language-plaintext highlighter-rouge">en.lproj</code><li>Create a <code class="language-plaintext highlighter-rouge">Localizable.strings</code> file<li>Add you localized string keys</ol><p><a href="/assets/images/swift-packages-adding-localization-directories.png" class="popup img-link "><img data-src="/assets/images/swift-packages-adding-localization-directories.png" alt="image" class="lazyload" data-proofer-ignore></a></p><blockquote><p>Repeat the steps above for all other languages your package will support.</p></blockquote><p><strong>Using localized strings in SwiftUI:</strong></p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kt">Text</span><span class="p">(</span><span class="s">"Settings"</span><span class="p">,</span> <span class="nv">bundle</span><span class="p">:</span> <span class="o">.</span><span class="n">module</span><span class="p">)</span>
</pre></table></code></div></div><p>With SwiftUI we can easily customize the preview by adding an <code class="language-plaintext highlighter-rouge">.environment</code> override to see a preview for a specific locale:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kt">MySwiftUIView</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">environment</span><span class="p">(\</span><span class="o">.</span><span class="n">locale</span><span class="p">,</span> <span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">identifier</span><span class="p">:</span> <span class="s">"de"</span><span class="p">))</span>
</pre></table></code></div></div><blockquote><p>You don‚Äôt need to add the localization directories in the package manifest since the <code class="language-plaintext highlighter-rouge">.lproj</code> file suffix makes the purpose of the file clear.</p></blockquote><h2 id="binary-frameworks"><span class="me-2">Binary Frameworks</span><a href="#binary-frameworks" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Last but not least, we now also have the ability to distribute Binary Frameworks as Swift Packages.</p><p>This is especially useful for distributing closed-source binaries when you don‚Äôt want or cannot distribute your source code.</p><h3 id="adding-a-binary-dependency"><span class="me-2">Adding a binary dependency</span><a href="#adding-a-binary-dependency" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Adding a binary dependency is no different than adding a regular source-based Swift Package dependency. You can either add your dependency using Xcode or by adding it manually to you package manifest:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Firebase"</span><span class="p">,</span>
    <span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/firebase/firebase-ios-sdk.git"</span><span class="p">,</span> <span class="o">.</span><span class="nf">branch</span><span class="p">(</span><span class="s">"X.Y-spm-beta"</span><span class="p">))</span>
<span class="p">]</span>
</pre></table></code></div></div><h3 id="distributing-binary-frameworks-as-a-swift-package"><span class="me-2">Distributing Binary Frameworks as a Swift Package</span><a href="#distributing-binary-frameworks-as-a-swift-package" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Distributing Binary Frameworks as Swift Packages requires that you specifying the following in the <code class="language-plaintext highlighter-rouge">targets</code> section of your package manifest:</p><div class="language-swift highlighter-rouge"><div class="code-header"> <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nv">targets</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="nf">binaryTarget</span><span class="p">(</span>
        <span class="nv">name</span><span class="p">:</span> <span class="s">"BinaryExample"</span><span class="p">,</span>
        <span class="nv">url</span><span class="p">:</span> <span class="s">"https://example.com/binary-example-1.0.0.xcframework.zip"</span><span class="p">,</span>
        <span class="nv">checksum</span><span class="p">:</span> <span class="s">"a40d8b15ed737c5029bf3d99fa0c46a6"</span><span class="p">)</span>
<span class="p">]</span>
</pre></table></code></div></div><h3 id="a-couple-of-notes-regarding-binary-targets"><span class="me-2">A couple of notes regarding binary targets</span><a href="#a-couple-of-notes-regarding-binary-targets" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Binary targets use XCFrameworks under the hood<li>Only supported on Apple platforms<li>The URL of the binary can be HTTPS or path-based<li>The binary will be downloaded separately when adding the dependency<li>The name of the binary target corresponds to the module name<li>Like source-based targets, use semantic versioning when versioning your packages</ul><p>To learn more about Binary Frameworks I highly suggest watching the <a href="https://developer.apple.com/videos/play/wwdc2019/416/">Binary Frameworks in Swift</a> video from WWDC19.</p><p>Swift also includes a neat little tool to compute a checksum for your binary:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>swift package compute-checksum binary-example-1.0.0.xcframework.zip
// outputs: a40d8b15ed737c5029bf3d99fa0c46a6
</pre></table></code></div></div><h2 id="summary"><span class="me-2">Summary</span><a href="#summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>With all these new features introduced in Swift 5.3 and Xcode 12, there is not much holding Swift Packages back and I expect the adoption rate for Swift Packages to only increase over time.</p><p>Looking ahead, I would like to see some built-in support for package discovery in Xcode. Fortunately, it seems like we might get some traction in this area soon with <a href="https://github.com/apple/swift-evolution/blob/main/proposals/0291-package-collections.md">Proposal SE-0291</a>.</p><h2 id="additional-resources"><span class="me-2">Additional Resources</span><a href="#additional-resources" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://developer.apple.com/videos/play/wwdc2020/10169/">Swift packages: Resources and localization - WWDC20</a><li><a href="https://developer.apple.com/videos/play/wwdc2020/10147/">Distribute binary frameworks as Swift packages - WWDC20</a><li><a href="https://developer.apple.com/videos/play/wwdc2019/416/">Binary Frameworks in Swift - WWDC19</a><li><a href="https://developer.apple.com/videos/play/wwdc2019/403/">Creating Great Localized Experiences with Xcode 11 - WWDC19</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/swift/'>swift</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/swift/" class="post-tag no-text-decoration" >swift</a> <a href="/tags/package/" class="post-tag no-text-decoration" >package</a> <a href="/tags/spm/" class="post-tag no-text-decoration" >spm</a> <a href="/tags/swift-package-manager/" class="post-tag no-text-decoration" >swift-package-manager</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Swift%20Packages%20-%20New%20in%20Swift%205.3%20-%20Rynaard%20Burger&url=https%3A%2F%2Frynaardb.com%2Fposts%2Fswift-packages-new-in-swift-5-3%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Swift%20Packages%20-%20New%20in%20Swift%205.3%20-%20Rynaard%20Burger&u=https%3A%2F%2Frynaardb.com%2Fposts%2Fswift-packages-new-in-swift-5-3%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Frynaardb.com%2Fposts%2Fswift-packages-new-in-swift-5-3%2F&text=Swift%20Packages%20-%20New%20in%20Swift%205.3%20-%20Rynaard%20Burger" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Frynaardb.com%2Fposts%2Fswift-packages-new-in-swift-5-3%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin" > <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/ephemeral-builds-empowering-efficient-and-disposable-build-environments/">Ephemeral Builds - Empowering Efficient and Disposable Build Environments</a><li class="text-truncate lh-lg"> <a href="/posts/docker-multi-stage-builds/">Docker Multi-stage Builds</a><li class="text-truncate lh-lg"> <a href="/posts/progressive-delivery-techniques-in-devops/">Progressive Delivery Techniques in DevOps</a><li class="text-truncate lh-lg"> <a href="/posts/detect-and-prevent-deployment-drift-in-kubernetes/">Detect and Prevent Deployment Drift in Kubernetes</a><li class="text-truncate lh-lg"> <a href="/posts/testing-docker-images-tools-and-best-practices/">Testing Docker Images - Tools and Best Practices</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/iac/">iac</a> <a class="post-tag btn btn-outline-primary" href="/tags/infrastructure-as-code/">infrastructure-as-code</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/devops/">devops</a> <a class="post-tag btn btn-outline-primary" href="/tags/terraform/">terraform</a> <a class="post-tag btn btn-outline-primary" href="/tags/xcode/">xcode</a> <a class="post-tag btn btn-outline-primary" href="/tags/ci-cd/">ci-cd</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai/">ai</a></div></div></div><div id="toc-wrapper" class="ps-0 pe-4 mb-5"><div class="panel-heading ps-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> Further Reading</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/swift-package-manager-creating-packages/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1578434400" data-df="ll" > Jan 8, 2020 </em><h4 class="pt-0 my-2" data-toc-skip>Swift Package Manager - Creating Packages</h4><div class="text-muted small"><p> Swift Package Manager, or SPM, is a tool for managing the distribution of Swift code. It is also a great tool to manage your project dependencies, allowing you to import third-party frameworks or t...</p></div></div></a></div><div class="col"> <a href="/posts/basic-uiview-animations/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1550268000" data-df="ll" > Feb 16, 2019 </em><h4 class="pt-0 my-2" data-toc-skip>Basic UIView Animations</h4><div class="text-muted small"><p> Subtle and concise animations can help draw the user‚Äôs attention to a specific area of your application. Often it may be unclear to the user when to perform a certain action or as to what is going ...</p></div></div></a></div><div class="col"> <a href="/posts/ios-animations-using-lottie/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1552687200" data-df="ll" > Mar 16, 2019 </em><h4 class="pt-0 my-2" data-toc-skip>iOS animations using Lottie</h4><div class="text-muted small"><p> Lottie is a mobile library for iOS and Android that parses Adobe After Effects animations exported as JSON with bodymovin and renders the vector animations natively on mobile and through React Nati...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/essential-xcode-keyboard-shortcuts-for-increased-productivity/" class="btn btn-outline-primary" prompt="Older" ><p>Essential Xcode keyboard shortcuts for increased productivity</p></a> <a href="/posts/swiftui-creating-custom-xcode-library-items/" class="btn btn-outline-primary" prompt="Newer" ><p>SwiftUI - Creating custom Xcode library items</p></a></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a> <a class="post-tag btn btn-outline-primary" href="/tags/iac/">iac</a> <a class="post-tag btn btn-outline-primary" href="/tags/infrastructure-as-code/">infrastructure-as-code</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/devops/">devops</a> <a class="post-tag btn btn-outline-primary" href="/tags/terraform/">terraform</a> <a class="post-tag btn btn-outline-primary" href="/tags/xcode/">xcode</a> <a class="post-tag btn btn-outline-primary" href="/tags/ci-cd/">ci-cd</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/ai/">ai</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>rynaardb.com</p><p>¬© 2023 <a href="https://twitter.com/rynaardb">Rynaard Burger</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/en.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js,npm/tocbot@4.21.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-N0LQM86HKV"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-N0LQM86HKV'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3797894884439015" crossorigin="anonymous"></script> <a rel="me" href="https://github.com/rynaardb">GitHub</a> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
